---
layout: post
title: "Страх и ужас в ФП на тайпскрипте"
date: 2021-07-15 00:00:00
description: "Ощущения от ФП-библиотек для тайпскрипта"
---

От чтения тайпскриптовых ФП-библиотек ([раз](https://github.com/gcanti/fp-ts),
[два](https://github.com/effect-TS/core)) складывается впечатление, что они
проходят тот же этап, что и скалисты несколько лет назад, когда тащили всё
подряд из хаскеля. Только в тайпскрипте это выглядит как будто бы ещё хуже:
один только [заменитель
do-нотации](https://gcanti.github.io/fp-ts/guides/do-notation.html) чего стоит.
В исходников ещё много вещей, которые интересны своей изобретательностью в
обходе ограничений компилятора, но болезнены в использовании.

Похоже, что "переводы" хаскеля — это проклятие всех языков с развитой системой
типов, а идиоматичный инструментарий для ФП появляется только спустя годы
экспериментов. 

Система типов в TS при этом передовая для промышленного языка: [условные
типы](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html),
типы-литералы даже с [поддержкой
шаблонов](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html),
flow typing, пересечения и объединения типов. Часть этих фич только появилась в
Scala 3, а в тайпскрипте существует уже несколько лет. Возможно, тайплевельные
истории там не летят из-за интеропа с JS, который гораздо более неприятный, чем
интероп с джавой в Scala-мире.
