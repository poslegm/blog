---
layout: post
title: "Версионирование библиотек в Scala"
date: 2021-10-13 00:00:00
description: "semver, PVP, early-semver"
---

Ещё полгода назад в sbt появилась возможность прописывать схему версионирования
зависимостей. Это помогает системе сборке сигнализировать о бинарной
несовместимости зная правила версионирования конкретной библиотеки, то есть с
меньшим количеством ложных срабатываний. Подробнее об этом написано
[здесь](https://scala-lang.org/blog/2021/02/16/preventing-version-conflicts-with-versionscheme.html).

Для меня стало открытием, что версионирование библиотек в скала-экосистеме —
это вовсе не кривой [semver](https://semver.org/lang/ru/), а другие схемы со
своей формализацией. Так, стандартная библиотека версионируется по
[PVP](https://pvp.haskell.org/): `epoch.major.minor`. В отличие от semver в нём
не надо увеличивать первую цифру при каждом ломающем изменении: её можно
инкрементить на усмотрение автора о важности обновления.

А другие библиотеки, например, проекты Typelevel, используют
[early-semver](https://docs.scala-lang.org/overviews/core/binary-compatibility-for-library-authors.html#versioning-scheme---communicating-compatibility-breakages).
В нём первая цифра увеличивается только при изменениях, ломающих *бинарную*
совместимость. Если же major=0, то бинарную совместимость можно ломать при
каждом минорном релизе. Собственно поэтому версия
[circe](https://github.com/circe/circe) до сих пор начинается с нуля :) И
рекомендацией для библиотек является как раз использование early-semver.
